{% extends 'base.html' %}
{% load static %}

{% block title %}Analytics - DocsAI Agent{% endblock %}

{% block content %}
<div class="space-y-8 animate-in fade-in duration-500">
    <!-- Page Header -->
    <div class="flex items-center justify-between bg-white dark:bg-gray-800 p-8 rounded-[2rem] border border-gray-100 dark:border-gray-700 shadow-sm">
        <div>
            <h2 class="text-2xl font-black text-gray-900 dark:text-gray-100 tracking-tight">System Performance Hub</h2>
            <p class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Real-time metrics and behavioral analysis for DocsAI workspace.</p>
        </div>
        <div class="flex items-center gap-4">
            <select class="px-6 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-2xl text-xs font-black uppercase tracking-widest outline-none focus:ring-4 ring-blue-500/10 transition-all text-gray-900 dark:text-gray-100">
                <option value="7">Last 7 Days</option>
                <option value="30">Last 30 Days</option>
                <option value="90">Last 90 Days</option>
                <option value="365">Full Year</option>
            </select>
            <button class="px-8 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-2xl text-xs font-black uppercase tracking-widest shadow-xl hover:bg-black dark:hover:bg-gray-200 transition-all flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>
                Export Data
            </button>
        </div>
    </div>
    
    <!-- Statistics Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {% include 'components/stat_card.html' with label="Total Events" value="12,482" change="8.4%" trend="up" color="bg-blue-50 text-blue-600" icon='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>' %}
        {% include 'components/stat_card.html' with label="Today's Activity" value="482" change="12%" trend="up" color="bg-green-50 text-green-600" icon='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>' %}
        {% include 'components/stat_card.html' with label="Weekly Interactions" value="3,842" change="2.1%" trend="down" color="bg-purple-50 text-purple-600" icon='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" /></svg>' %}
        {% include 'components/stat_card.html' with label="Search Queries" value="1,902" change="15.4%" trend="up" color="bg-orange-50 text-orange-600" icon='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>' %}
    </div>
    
    <!-- Main Content Area -->
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <!-- Left Column: Charts -->
        <div class="lg:col-span-8 space-y-8">
            <!-- Events Over Time -->
            <section class="bg-white dark:bg-gray-800 p-8 rounded-[2rem] border border-gray-100 dark:border-gray-700 shadow-sm relative overflow-hidden">
                <div class="flex items-center justify-between mb-8">
                    <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3">
                        <span class="w-1 h-5 bg-blue-600 rounded-full"></span>
                        Events Over Time
                    </h3>
                    <div class="flex items-center gap-2">
                        <span class="w-3 h-3 rounded-full bg-blue-600"></span>
                        <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Global Traffic</span>
                    </div>
                </div>
                
                <div class="h-64 flex items-end justify-between gap-2 px-2">
                    <!-- Sample Bars -->
                    {% with "60 45 80 55 90 100 85 70 75 65 80 95 110 85 95 75 85 100 115 90" as heights %}
                        {% for h in heights.split %}
                            <div class="flex-1 bg-blue-500/10 hover:bg-blue-600/30 dark:bg-blue-400/10 dark:hover:bg-blue-400/30 transition-all rounded-t-lg group relative" style="height: {{ h }}%">
                                <div class="absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-[9px] font-bold py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10">
                                    {{ h }} Events
                                </div>
                            </div>
                        {% endfor %}
                    {% endwith %}
                </div>
                <div class="flex justify-between mt-4 px-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest border-t border-gray-50 dark:border-gray-700 pt-4">
                    <span>30 Days Ago</span>
                    <span>Mid Period</span>
                    <span>Today</span>
                </div>
            </section>

            <!-- Distribution and Patterns -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                 <section class="bg-white dark:bg-gray-800 p-8 rounded-[2rem] border border-gray-100 dark:border-gray-700 shadow-sm">
                    <h3 class="text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-widest mb-6 border-b border-gray-50 dark:border-gray-700 pb-4">Event Types Distribution</h3>
                    <div class="space-y-6">
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-xs font-bold text-gray-600 dark:text-gray-300">Page View</span>
                                <span class="text-xs font-black text-gray-900 dark:text-gray-100">5,402</span>
                            </div>
                            <div class="w-full h-2 bg-gray-50 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-blue-500" style="width: 43%"></div>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-xs font-bold text-gray-600 dark:text-gray-300">AI Interaction</span>
                                <span class="text-xs font-black text-gray-900 dark:text-gray-100">3,201</span>
                            </div>
                            <div class="w-full h-2 bg-gray-50 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-purple-500" style="width: 25%"></div>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-xs font-bold text-gray-600 dark:text-gray-300">Doc Operation</span>
                                <span class="text-xs font-black text-gray-900 dark:text-gray-100">2,104</span>
                            </div>
                            <div class="w-full h-2 bg-gray-50 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-green-500" style="width: 17%"></div>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-xs font-bold text-gray-600 dark:text-gray-300">System Task</span>
                                <span class="text-xs font-black text-gray-900 dark:text-gray-100">1,775</span>
                            </div>
                            <div class="w-full h-2 bg-gray-50 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-orange-500" style="width: 14%"></div>
                            </div>
                        </div>
                    </div>
                 </section>

                 <section class="bg-indigo-600 dark:bg-indigo-700 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden flex flex-col justify-center">
                    <div class="absolute -top-10 -right-10 w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
                    <h4 class="text-lg font-bold mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" /></svg>
                        AI Behavioral Insight
                    </h4>
                    <p class="text-xs text-indigo-100 leading-relaxed mb-6 font-medium">
                        We've detected a <strong>15% increase</strong> in Search Queries related to "Window Communication" this week. Suggest updating the corresponding documentation pages to address emerging developer questions.
                    </p>
                    <button class="w-full py-3 bg-white text-indigo-600 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-50 transition-colors">
                        Generate Actionable Report
                    </button>
                 </section>
            </div>
        </div>

        <!-- Right Column: Active Users & Recent Activity -->
        <div class="lg:col-span-4 space-y-8">
           <!-- Top Active Users -->
           <section class="bg-white dark:bg-gray-800 p-8 rounded-[2rem] border border-gray-100 dark:border-gray-700 shadow-sm">
              <h3 class="text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-widest mb-6">Top Active Workspace Members</h3>
              <div class="space-y-6">
                <!-- Mock Users -->
                <div class="group cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-[10px] font-bold border-2 border-white shadow-sm">S</div>
                            <div>
                                <p class="text-xs font-bold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 transition-colors">Sarah Jenkins</p>
                                <p class="text-[9px] text-gray-400 font-mono">@sarahj</p>
                            </div>
                        </div>
                        <span class="text-xs font-black text-gray-900 dark:text-gray-100">1,240</span>
                    </div>
                    <div class="w-full h-1.5 bg-gray-50 dark:bg-gray-700 rounded-full overflow-hidden">
                        <div class="h-full bg-blue-600 rounded-full" style="width: 85%"></div>
                    </div>
                </div>
                <div class="group cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-[10px] font-bold border-2 border-white shadow-sm">M</div>
                            <div>
                                <p class="text-xs font-bold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 transition-colors">Michael K.</p>
                                <p class="text-[9px] text-gray-400 font-mono">@mike_k</p>
                            </div>
                        </div>
                        <span class="text-xs font-black text-gray-900 dark:text-gray-100">982</span>
                    </div>
                    <div class="w-full h-1.5 bg-gray-50 dark:bg-gray-700 rounded-full overflow-hidden">
                        <div class="h-full bg-blue-600 rounded-full" style="width: 65%"></div>
                    </div>
                </div>
              </div>
           </section>

           <!-- Recent System Events -->
           <section class="bg-white dark:bg-gray-800 p-8 rounded-[2rem] border border-gray-100 dark:border-gray-700 shadow-sm">
              <h3 class="text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-widest mb-6">Recent Activity Timeline</h3>
              <div class="space-y-6">
                <div class="flex gap-4 relative">
                    <div class="absolute left-[15px] top-10 w-0.5 h-6 bg-gray-100 dark:bg-gray-700"></div>
                    <div class="w-8 h-8 rounded-xl bg-gray-50 dark:bg-gray-700 flex items-center justify-center text-blue-500 shrink-0 shadow-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    </div>
                    <div class="flex-1 min-w-0">
                       <div class="flex items-center justify-between">
                          <p class="text-xs font-bold text-gray-900 dark:text-gray-100 truncate">Documentation View</p>
                          <span class="text-[9px] font-bold text-gray-400 uppercase">2 mins ago</span>
                       </div>
                       <p class="text-[10px] text-gray-500 dark:text-gray-400 font-medium">by <span class="text-blue-600 dark:text-blue-400 font-bold">@sarahj</span></p>
                    </div>
                </div>
                <div class="flex gap-4 relative">
                    <div class="w-8 h-8 rounded-xl bg-gray-50 dark:bg-gray-700 flex items-center justify-center text-purple-500 shrink-0 shadow-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                    </div>
                    <div class="flex-1 min-w-0">
                       <div class="flex items-center justify-between">
                          <p class="text-xs font-bold text-gray-900 dark:text-gray-100 truncate">API Call Simulated</p>
                          <span class="text-[9px] font-bold text-gray-400 uppercase">15 mins ago</span>
                       </div>
                       <p class="text-[10px] text-gray-500 dark:text-gray-400 font-medium">by <span class="text-blue-600 dark:text-blue-400 font-bold">@mike_k</span></p>
                    </div>
                </div>
              </div>
              <button class="w-full mt-8 py-3 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-xl text-[10px] font-bold text-gray-500 dark:text-gray-300 uppercase tracking-widest transition-all">
                Full Audit Log
              </button>
           </section>
        </div>
    </div>
</div>
{% endblock %}
