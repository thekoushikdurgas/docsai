{% comment %}
Reusable resource detail template component.

Parameters:
- resource: Resource object
- resource_type: Type of resource (pages, endpoints, relationships, postman)
- sub_resources: Dictionary of sub-resources to display
- back_url: URL for back button
{% endcomment %}
{% load custom_filters %}

<div class="space-y-6 animate-in fade-in duration-500">
    <!-- Resource Header -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md">
        <div>
            <h1 class="text-3xl font-black text-gray-900 dark:text-gray-100 tracking-tight">
                {% if resource.page_id %}{{ resource.page_id }}{% endif %}
                {% if resource.endpoint_id %}{{ resource.endpoint_id }}{% endif %}
                {% if resource.relationship_id %}{{ resource.relationship_id }}{% endif %}
                {% if resource.config_id %}{{ resource.config_id }}{% endif %}
            </h1>
            <p class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-2">{{ resource_type|title }} Details</p>
        </div>
        <div class="flex items-center gap-3 flex-wrap">
            {% if back_url %}
                <a href="{{ back_url }}" class="inline-flex items-center px-4 py-2 bg-gray-600 dark:bg-gray-500 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors font-medium text-sm">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Back to {{ resource_type|title }}
                </a>
            {% endif %}
        </div>
    </div>
    
    <!-- Resource Information -->
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md p-6">
        <h2 class="text-lg font-bold text-gray-900 dark:text-gray-100 mb-4">{{ resource_type|title }} Information</h2>
        <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {% for key, value in resource.items %}
                {% if value and key != 'sections' and key != 'components' and key != 'endpoints' and key != 'versions' %}
                    <div>
                        <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">{{ key|title|replace:"_, " }}</dt>
                        <dd class="mt-1 text-sm text-gray-900 dark:text-gray-100">
                            {% if value|length > 100 %}
                                <pre class="bg-gray-50 dark:bg-gray-900 p-2 rounded text-xs overflow-x-auto">{{ value|truncatewords:20 }}</pre>
                            {% else %}
                                {{ value|default:"N/A" }}
                            {% endif %}
                        </dd>
                    </div>
                {% endif %}
            {% endfor %}
        </dl>
    </div>
    
    <!-- Sub-resources -->
    {% if sub_resources %}
        {% for sub_name, sub_data in sub_resources.items %}
            {% if sub_data %}
                <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md p-6">
                    <h2 class="text-lg font-bold text-gray-900 dark:text-gray-100 mb-4">{{ sub_name|title|replace:"_, " }}</h2>
                    {% if sub_data|length %}
                        {% if sub_data|length > 10 %}
                            <pre class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg overflow-x-auto text-sm max-h-96 overflow-y-auto">{{ sub_data|safe }}</pre>
                        {% else %}
                            <div class="space-y-2">
                                {% for item in sub_data %}
                                    <div class="p-3 bg-gray-50 dark:bg-gray-900 rounded-lg">
                                        {% if item|length %}
                                            <pre class="text-sm">{{ item|safe }}</pre>
                                        {% else %}
                                            {{ item }}
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    {% else %}
                        <p class="text-sm text-gray-500 dark:text-gray-400">No {{ sub_name }} available</p>
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
</div>
