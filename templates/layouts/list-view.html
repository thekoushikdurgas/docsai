{% extends 'base.html' %}
{% load static %}
{# List View Layout: override list_header, list_filters, list_content, list_pagination. Context: page_title, breadcrumbs, create_url, create_text, filters, view_mode, total_count. #}

{% block content %}
<div class="w-full max-w-7xl mx-auto">
    <!-- Breadcrumb Navigation -->
    {% if breadcrumbs %}
    <nav class="flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-4" aria-label="Breadcrumb">
        {% for breadcrumb in breadcrumbs %}
            {% if not forloop.last %}
                <a href="{{ breadcrumb.url }}" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
                    {{ breadcrumb.text }}
                </a>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            {% else %}
                <span class="text-gray-700 dark:text-gray-300 font-medium">{{ breadcrumb.text }}</span>
            {% endif %}
        {% endfor %}
    </nav>
    {% endif %}
    
    <!-- Header -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-700 p-6 mb-6">
        {% block list_header %}
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">{{ page_title|default:'List' }}</h1>
                {% if page_description %}
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{{ page_description }}</p>
                {% endif %}
                {% if total_count is not None %}
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{{ total_count }} item{{ total_count|pluralize }}</p>
                {% endif %}
            </div>
            <div class="flex items-center gap-3">
                {% if view_mode %}
                <div class="flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
                    <button type="button" id="view-list-btn"
                            onclick="typeof setViewMode === 'function' && setViewMode('list')"
                            class="p-2 rounded {% if view_mode == 'list' %}bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100{% else %}text-gray-500 dark:text-gray-400{% endif %} transition-colors"
                            aria-label="List view">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                    <button type="button" id="view-grid-btn"
                            onclick="typeof setViewMode === 'function' && setViewMode('grid')"
                            class="p-2 rounded {% if view_mode == 'grid' %}bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100{% else %}text-gray-500 dark:text-gray-400{% endif %} transition-colors"
                            aria-label="Grid view">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                        </svg>
                    </button>
                </div>
                {% endif %}
                {% if create_url %}
                <a href="{{ create_url }}" 
                   class="inline-flex items-center px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors font-medium text-sm">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                    {{ create_text|default:'Create New' }}
                </a>
                {% endif %}
            </div>
        </div>
        {% endblock %}
    </div>
    
    <!-- Filters -->
    {% if filters %}
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-700 p-4 mb-6">
        {% block list_filters %}
        <div class="flex flex-wrap items-center gap-4">
            <!-- Filter controls will be rendered here -->
        </div>
        {% endblock %}
    </div>
    {% endif %}
    
    <!-- List Content -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-700 p-6">
        {% block list_content %}{% endblock %}
    </div>
    
    <!-- Pagination -->
    {% block list_pagination %}{% endblock %}
</div>
{% endblock %}
