{% comment %}
Error Message Component

Usage:
{% include 'components/error_message.html' with type='error' title='Error' message='Something went wrong' %}

Parameters:
- type: Error type (error, warning, info) - default: error
- title: Error title (optional)
- message: Error message (required)
- icon: Custom icon (optional)
- dismissible: Show dismiss button (default: false)
- action_text: Action button text (optional)
- action_url: Action button URL (optional)
- action_onclick: Action button onclick handler (optional)
- class: Additional CSS classes (optional)
- id: Component ID (optional)
{% endcomment %}

{% load static %}

<div class="error-message error-message-{{ type|default:'error' }} {{ class|default:'' }}" 
     {% if id %}id="{{ id }}"{% endif %}
     role="alert"
     aria-live="assertive">
    <div class="error-message-content">
        {% if icon %}
            <div class="error-message-icon">{{ icon|safe }}</div>
        {% else %}
            <div class="error-message-icon">
                {% if type == 'warning' %}
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                {% elif type == 'info' %}
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                {% else %}
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                {% endif %}
            </div>
        {% endif %}
        
        <div class="error-message-text">
            {% if title %}
            <h4 class="error-message-title">{{ title }}</h4>
            {% endif %}
            <p class="error-message-description">{{ message }}</p>
        </div>
        
        {% if dismissible %}
        <button type="button" 
                class="error-message-dismiss" 
                aria-label="Dismiss error message"
                onclick="this.closest('.error-message').remove()">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
        {% endif %}
    </div>
    
    {% if action_text %}
    <div class="error-message-actions">
        {% if action_url %}
        <a href="{{ action_url }}" class="error-message-action-btn">{{ action_text }}</a>
        {% elif action_onclick %}
        <button type="button" class="error-message-action-btn" onclick="{{ action_onclick }}">{{ action_text }}</button>
        {% else %}
        <button type="button" class="error-message-action-btn">{{ action_text }}</button>
        {% endif %}
    </div>
    {% endif %}
</div>
